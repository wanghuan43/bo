<div class="clearfix">
    <nav aria-label="Page navigation">
        <{$lists->render()}>
    </nav>
    <{assign name="type" value="$Request.get.type" /}>
    <div class="main-pannel">
        <table class="list" cellspacing="0">
            <thead>
            <tr>
                <{if empty($type)}>
                <th style="min-width: 50px;text-align:center;padding-right:4px;"><input type="checkbox" id="list-all-member" value="all"/></th>
                <{else}>
                <th style="min-width: 50px;text-align:center;padding-right:4px;"></th>
                <{/if}>
                <th>姓名</th>
                <th>编号</th>
                <th>部门</th>
                <th>科室</th>
            </tr>
            </thead>
            <tbody>
            <{volist name="lists" id="vo" empty="$empty"}>
            <tr>
                <{if empty($type)}>
                <td><input type="checkbox" value="<{$vo.m_id}>" class="member-ids"></td>
                <{else}>
                <td><input type="radio" value="<{$vo.m_id}>" class="member-ids" name="member-id"></td>
                <{/if}>
                <td><{$vo.m_name}></td>
                <td><{$vo.m_code}></td>
                <td><{$vo.m_department}></td>
                <td><{$vo.m_office}></td>
            </tr>
            <{/volist}>
            </tbody>
        </table>
    </div>
    <nav aria-label="Page navigation">
        <{$lists->render()}>
    </nav>
</div>
<script>
    (function($){

        $("#list-all-member").click(function(){
            $this = $(this);
            $(".member-ids").prop("checked",$this.prop("checked")).change();
        });
        $("input.member-ids[type='checkbox']").change(function(){
            var $this = $(this);
            var option = $("#sel-ids").find("option[value='"+$this.val()+"']");
            var html = "<option value='"+$this.val()+"' selected>"+$this.parent().parent().find("td:nth-child(2)").html()+"</option>";
            if( $this.prop("checked") ){
                if( option.length>0 && option.prop("selected") == false ){
                    option.remove();
                    $("#sel-ids").append(html);
                }else if( option.length == 0 ){
                    $("#sel-ids").append(html);
                }
            }else {
                option.remove();
            }
        });
    })(jQuery);
</script>